---
keyword: [物联网, 物联网平台, IoT, 规则引擎, 流转数据, 发送数据, 云数据库 RDS, MySQL, SQL Server]
---

# 数据转发到云数据库RDS

您可以设置规则引擎数据流转，将处理后的数据转发到云数据库RDS版（以下简称RDS）的实例中存储。

-   已在您的物联网平台实例所在地域创建专有网络下的MySQL或SQL Server版RDS实例，并创建数据库和数据表。RDS使用方法，请参见[云数据库RDS文档](/cn.zh-CN/云数据库 RDS 简介/什么是云数据库RDS.md)。
-   已创建数据转发规则和编写处理数据的SQL，请参见[设置数据流转规则](/cn.zh-CN/消息通信/云产品流转/设置数据流转规则.md)。

## 限制说明

-   仅支持同地域转发。例如：华东2（上海）的物联网平台实例数据只能转发到华东2（上海）的RDS数据表中。
-   仅支持转发到专有网络（VPC）下的RDS实例。
-   支持MySQL实例和SQL Server实例。
-   支持普通数据库和高权限数据库的转发。
-   仅支持转发JSON格式数据。

## 操作步骤

1.  登录[物联网平台控制台](http://iot.console.aliyun.com/)。

2.  在左侧导航栏，选择**规则引擎** \> **云产品流转**。

3.  单击规则对应的**查看**，进入数据流转规则页。

4.  单击**转发数据**一栏对应的**添加操作**。

5.  在添加操作对话框中，选择操作为**存储到云数据库（RDS）中**。按照界面提示，设置其他信息，单击**确认**。

    |参数|描述|
    |:-|:-|
    |选择操作|选择**存储到云数据库（RDS）中**。|
    |地域|固定为您的物联网平台实例所在地域。|
    |RDS实例|选择RDS实例。|
    |数据库|输入数据库名。 **说明：** 如果是高权限数据库，需要您手动输入数据库名称。 |
    |账号|输入RDS实例的用户账号。此账号应具有该数据库的读写权限，否则规则引擎无法将数据写入RDS。 **说明：** 规则引擎获得账号后，仅将规则匹配的数据写进数据库中，不会做其他操作。 |
    |密码|输入登录RDS实例的密码。|
    |表名|输入数据库中已建立的数据表名。规则引擎将把数据写入这张表上。|
    |键|输入RDS数据表的一个字段。规则引擎将把数据存入该字段中。|
    |值|输入您在数据处理SQL中指定的Topic中的消息的一个字段，作为输入数据表字段（键）的值。 **说明：**

    -   值与键的数据类型需保持一致，否则无法存储成功。
    -   可输入一个变量，如`${deviceName}`。 |
    |角色|授权物联网平台将数据写入RDS。 如您还未创建相关角色，单击**创建RAM角色**，跳转到RAM控制台，创建角色和授权策略，请参见[创建RAM角色](/cn.zh-CN/角色管理/创建RAM角色/创建可信实体为阿里云账号的RAM角色.md)。 |

6.  回到云产品流转页，单击规则对应的**启动**按钮启动规则。

7.  在[RDS控制台](https://rdsnext.console.aliyun.com/)的数据安全性页面，设置和查看白名单。配置完成后，规则引擎为了连接RDS，会在RDS的白名单中添加下列IP。若这些IP未出现，请手动添加。

    -   华东2：100.104.123.0/24
    -   亚太东南1（新加坡）：100.104.106.0/24
    -   美国（硅谷）：100.104.8.0/24
    -   美国（弗吉尼亚）：100.104.133.64/26
    -   德国（法兰克福）：100.104.160.192/26
    -   日本（东京）：100.104.160.192/26
    ![RDS数据库](https://static-aliyun-doc.oss-cn-hangzhou.aliyuncs.com/assets/img/zh-CN/1186549951/p3010.png)


